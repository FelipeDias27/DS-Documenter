<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <style>
      body { font-family: sans-serif; padding: 16px; }
      select, button { width: 100%; padding: 8px; margin-top: 12px; }
    </style>
  </head>
  <body>
    <h3>Gerar documentação</h3>
    <select id="component-select">
      <option>Carregando...</option>
    </select>
    <button id="generate">Criar frame</button>

    <script>
      const select = document.getElementById('component-select');

      // Recebe a lista de componentes enviada por code.ts
      window.onmessage = (event) => {
        const msg = event.data.pluginMessage;
        if (msg.type === 'set-components') {
          select.innerHTML = ''; // limpa opções antigas
          msg.components.forEach(name => {
            const option = document.createElement('option');
            option.value = name;
            option.textContent = name;
            select.appendChild(option);
          });
        }
      };

      // Envia mensagem para criar o frame
      document.getElementById('generate').onclick = () => {
        const component = select.value;
        parent.postMessage({
          pluginMessage: {
            type: 'create-doc',
            component,
            data: {} // por enquanto vazio
          }
        }, '*');
      };
    </script>
  </body>
</html>

